<div *ngIf="!noData()" class="main-content">
  <div class="title">
    <h1>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
  </div>

  <div class="stats-row">
    <div class="stat-box">
      <div class="stat-title">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –≤—ã—Å–æ–∫–∏–º —Ä–∏—Å–∫–æ–º</div>
      <div class="stat-value">{{ resultData?.statistics?.high_risk_count }} ({{getPercentage(resultData?.statistics?.high_risk_count ?? 0)}})</div>
    </div>

    <div class="stat-box">
      <div class="stat-title">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å–æ —Å—Ä–µ–¥–Ω–∏–º —Ä–∏—Å–∫–æ–º</div>
      <div class="stat-value">{{ resultData?.statistics?.medium_risk_count }} ({{ getPercentage(resultData?.statistics?.medium_risk_count ?? 0) }})</div>
    </div>

    <div class="stat-box">
      <div class="stat-title">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –Ω–∏–∑–∫–∏–º —Ä–∏—Å–∫–æ–º</div>
      <div class="stat-value">{{ resultData?.statistics?.low_risk_count }} ({{ getPercentage(resultData?.statistics?.low_risk_count ?? 0) }})</div>
    </div>
  </div>


  <div class="risk_distribution_chart">
    <h4>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –æ—Ü–µ–Ω–∫–µ —Ä–∏—Å–∫–∞</h4>
    <p-chart
      type="bar"
      [data]="chartData"
      [options]="chartOptions"
      style="width: 100%; height: 1200px"
    />
  </div>


  <div class="rule-percentage-chart">
    <h2>–ß–∞—Å—Ç–æ—Ç–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª</h2>
    <h4>–ü—Ä–æ—Ü–µ–Ω—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞</h4>

    <p-chart
      type="bar"
      [data]="chartDataTopTriggeredRules"
      [options]="chartOptionsTopTriggeredRules"
    ></p-chart>
  </div>


  <div class="top-10-transactions-by-amount">
    <h2>–¢–û–ü-10 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ —Å—É–º–º–µ</h2>

    <p-table [value]="top10transactionByAmount" [rows]="10" responsiveLayout="scroll">
      <ng-template pTemplate="header">
        <tr>
          <th>ID</th>
          <th>–î–∞—Ç–∞</th>
          <th>–°—É–º–º–∞ (USD)</th>
          <th>–ü–ª–∞—Ç–µ–ª—å—â–∏–∫</th>
          <th>–ü–æ–ª—É—á–∞—Ç–µ–ª—å</th>
          <th>–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-tx>
        <tr>
          <td>{{ tx.transaction_id }}</td>
          <td>{{ tx.analysis_details.transaction_date | date:'short' }}</td>
          <td>{{ tx.analysis_details.amount }}</td>
          <td>{{ tx.analysis_details.payer_info }}</td>
          <td>{{ tx.analysis_details.receiver_info }}</td>
          <td>{{ tx.risk_level }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <div class="top-10-high-risk-transaction">
    <h2>–¢–û–ü-10 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –æ—Ü–µ–Ω–∫–µ —Ä–∏—Å–∫–∞</h2>
    <p-table [value]="top10HighRisk" [rows]="10" responsiveLayout="scroll">
      <ng-template pTemplate="header">
        <tr>
          <th>ID</th>
          <th>–î–∞—Ç–∞</th>
          <th>–°—É–º–º–∞ (USD)</th>
          <th>–ü–ª–∞—Ç–µ–ª—å—â–∏–∫</th>
          <th>–ü–æ–ª—É—á–∞—Ç–µ–ª—å</th>
          <th>–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞</th>
          <th>–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–∞</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-tx>
        <tr>
          <td>{{ tx.transaction_id }}</td>
          <td>{{ tx.analysis_details.transaction_date | date:'short' }}</td>
          <td>{{ tx.analysis_details.amount }}</td>
          <td>{{ tx.analysis_details.payer_info }}</td>
          <td>{{ tx.analysis_details.receiver_info }}</td>
          <td>{{ tx.risk_level }}</td>
          <td>{{ tx.risk_score }}</td>
        </tr>
      </ng-template>
    </p-table>

  </div>
</div>

<div *ngIf="noData()" class="no-data-container">
  <p>–ù–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.</p>
</div>

